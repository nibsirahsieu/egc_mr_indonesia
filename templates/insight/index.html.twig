{% extends 'front.html.twig' %}

{% block title %}
    {% if metaPage.metaTitle %}
        <title>{{ metaPage.metaTitle }}</title>
    {% else %}
        {{ parent() }}
    {% endif %}    
{% endblock %}
{% block meta_title %}
   {#<meta name="title" content="{{ metaPage.metaTitle }}">#}
   <meta property="og:title" content="{{ metaPage.metaTitle }}" />
   <meta name="twitter:title" content="{{ metaPage.metaTitle }}" />
{% endblock %}
{% block meta_description %}
   <meta name="description" content="{{ metaPage.metaDescription }}">
   <meta property="og:description" content="{{ metaPage.metaDescription }}" />
   <meta name="twitter:description" content="{{ metaPage.metaDescription }}" />
{% endblock %}
{% block meta_url %}
   <meta property="og:url" content="{{ url('app_insights_index') }}" />  
   <link rel="canonical" href="{{ url('app_insights_index') }}" />
{% endblock %}

{% block javascripts %}
    {% block importmap %}{{ importmap(['main', 'insights']) }}{% endblock %}
{% endblock %}

{% block inline_stylesheets %}
    <style>
        .p-header {background-image: url('{{ asset("images/ant-rozetsky-_qWeqqmpBpU-unsplash.webp") }}');}
    </style>
{% endblock %}

{% block header %}
    <header><div class="mt-[72px] lg:mt-[83px] container py-8 lg:py-14"><h1 class="p-header text-center font-heading heading-1 text-6xl lg:text-9xl xl:text-[12rem] xl:!leading-tight bg-clip-text text-transparent bg-center">{{ pageTitle }}</h1></div></header>
{% endblock %}

{% block content %}
    <section id="insights">
        <div class="bg-white" style="{{ postTypes|length > 1 and category == '' ? '' : 'display:none' }}">
            <div class="container flex justify-end relative">
                <div x-data="{ isOpen: false, openedWithKeyboard: false }" class="relative" @keydown.esc.window="isOpen = false, openedWithKeyboard = false">
                    <!-- Toggle Button --> 
                    <button type="button" @click="isOpen = ! isOpen" class="inline-flex cursor-pointer items-center gap-2 whitespace-nowrap rounded-md border border-neutral-300 bg-white px-4 py-2 text-sm font-medium tracking-wide transition hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral-800 dark:border-neutral-700 dark:bg-neutral-900 dark:focus-visible:outline-neutral-300" aria-haspopup="true" @keydown.space.prevent="openedWithKeyboard = true" @keydown.enter.prevent="openedWithKeyboard = true" @keydown.down.prevent="openedWithKeyboard = true" :class="isOpen || openedWithKeyboard ? 'text-neutral-900 dark:text-white' : 'text-neutral-600 dark:text-neutral-300'" :aria-expanded="isOpen || openedWithKeyboard">
                        Select Insights Category
                        <svg aria-hidden="true" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-4 totate-0">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
                        </svg>
                    </button> 
                    <!-- Dropdown Menu --> 
                    <div x-cloak x-show="isOpen || openedWithKeyboard" x-transition x-trap="openedWithKeyboard" @click.outside="isOpen = false, openedWithKeyboard = false" @keydown.down.prevent="$focus.wrap().next()" @keydown.up.prevent="$focus.wrap().previous()" class="absolute z-50 top-11 left-0 flex w-full min-w-[12rem] flex-col overflow-hidden rounded-md border border-neutral-300 bg-white py-1.5 dark:border-neutral-700 dark:bg-neutral-900" role="menu"> 
                        {% for postType in postTypes %}
                            <a href="/insights" data-pk="{{ postType.id }}" data-count="{{ postType.count }}" class="post-category bg-white px-4 py-2 text-sm text-neutral-600 hover:bg-neutral-900/5 hover:text-neutral-900 focus-visible:bg-neutral-900/10 focus-visible:text-neutral-900 focus-visible:outline-none dark:bg-neutral-900 dark:text-neutral-300 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/10 dark:focus-visible:text-white" role="menuitem">{{ postType.name }}</a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div id="data_container" class="container py-8 lg:py-14 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6" data-last-published="" data-last-id="" data-type-id="{{ defaultTypeId }}">
        </div>
    </section>
{% endblock %}